- name: NFS Configuration
  hosts: clusters
  become: true
  become_user: root
  tasks:
  - name: Update packages
    ansible.builtin.dnf:
      name: "*"
      state: latest
  - name: NFS tools
    ansible.builtin.dnf:
      name: "nfs-utils"
      state: latest
  - name: NFS mountpoint
    ansible.builtin.file:
      path: /mnt/data/shared
      state: directory
  - name: NFS fstab
    ansible.posix.mount:
      boot: true
      state: mounted
      fstype: nfs
      src: 10.0.8.191:/mnt/data/shared
      path: /mnt/data/shared
      opts: defaults,_netdev
